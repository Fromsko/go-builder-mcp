FROM golang:1.21-alpine

# Install git for go modules
RUN apk add --no-cache git

# Set the working directory
WORKDIR /app

# Copy go mod and sum files
COPY go.mod go.sum ./

# Download dependencies
RUN go mod download

# Copy the source code
COPY . .

# Build the application
RUN CGO_ENABLED=0 go build -ldflags="-s -w" -o gobuilder-mcp main.go

# Set the entry point
ENTRYPOINT ["./gobuilder-mcp"]
